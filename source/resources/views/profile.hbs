<div class="container mt-5 mb-5">
  <div class="row">
    <div class="col-md-3 col-sm-12 mb-3 ps-4 pe-4">
      <div class="card profileCard" style="min-height: 33rem;">
        <div class="row d-flex justify-content-center">
          <img class="col-8"
            src="https://cdn.discordapp.com/attachments/1176168664987345008/1186219554939080724/logo.png?ex=6592740c&is=657fff0c&hm=1231f35e6a5050bbf94b9506c079959ddbba6f079706b86202704bca00f5388f&"
            alt="">
        </div>
        <div class="row text-center mb-3">
          <h2 style="color: #000">Full Name</h2>
        </div>
        <div class="row">
          <div class="offset-2 col-10">
            <p><a href="/profile" style="color: #FFB0BD">Thông tin tài khoản</a></p>
            <p><a href="/profile/changepassword">Đổi mật khẩu</a></p>
            <p><a href="/order/index">Lịch sử đơn hàng</a></p>
            <p><a href="#">Đăng xuất</a></p>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-9 col-ms-12 ps-4 pe-4">
      <div class="card profileForm">
        <div class="card-body ps-5 pt-5">
          <h1>Hồ sơ của tôi</h1>
          <hr>
          <form id="updateForm" action="#" method="post" class="text-end">
            <div class="row align-items-center">
              <label for="inputName" class="col-form-label col-md-3 pe-5 mt-4">Họ tên (*)</label>
              <div class="col-md-9 col-lg-6">
                <input type="text" id="inputName" name="inputName" class="form-control" required>
                <small id="nameErr" class="form-text text-danger"></small>
              </div>
            </div>
            <div class="row align-items-center">
              <label for="inputDoB" class="col-form-label col-md-3 pe-5 mt-4">Ngày sinh (*)</label>
              <div class="col-md-9 col-lg-6">
                <input type="date" id="inputDoB" name="inputDoB" class="form-control" required>
              </div>
            </div>
            <div class="row align-items-center">
              <label for="inputPhoneNumber" class="col-form-label col-md-3 pe-5 mt-4">Điện thoại (*)</label>
              <div class="col-md-9 col-lg-6">
                <input type="text" id="inputPhoneNumber" name="inputPhoneNumber" class="form-control" required>
                <small id="phoneNumErr" class="form-text text-danger"></small>
              </div>
            </div>
            <div class="row align-items-center">
              <label for="inputEmail" class="col-form-label col-md-3 pe-5 mt-4">Email (*)</label>
              <div class="col-md-9 col-lg-6">
                <input type="email" id="inputEmail" name="inputEmail" class="form-control" required>
              </div>
            </div>
            <div class="row align-items-center">
              <label for="calc_shipping_provinces" class="form-label col-md-3 pe-5 mt-4">Tỉnh/ Thành phố (*)</label>
              <div class="col-md-9 col-lg-6">
                <select name="calc_shipping_provinces" class="form-select" style="font-size: 14px;" required>
                  <option value="">Tỉnh / Thành phố</option>
                </select>
              </div>
            </div>
            <div class="row align-items-center">
              <label for="calc_shipping_district" class="form-label col-md-3 pe-5 mt-4">Quận/ Huyện (*)</label>
              <div class="col-md-9 col-lg-6">
                <select name="calc_shipping_district" class="form-select" style="font-size: 14px;" required>
                  <option value="">Quận/ Huyện</option>
                </select>
              </div>
            </div>
            <div class="row align-items-center">
              <label for="inputAddress" class="col-form-label col-md-3 pe-5 mt-4">Địa chỉ chi tiết (*)</label>
              <div class="col-md-9 col-lg-6">
                <input type="text" id="inputAddress" name="inputAddress" class="form-control" required>
              </div>
            </div>
            <div class="row align-items-center mt-3">
              <div class="col-9 offset-3 text-start">
                <button type="submit" class="btn updateButton fs-4">Cập
                  nhật</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

  </div>
</div>
<script src="https://cdn.jsdelivr.net/gh/vietblogdao/js/districts.min.js"></script>
<script>
  $(() => {
    if (address_2 = localStorage.getItem('address_2_saved')) {
      $('select[name="calc_shipping_district"] option').each(function () {
        if ($(this).text() == address_2) {
          $(this).attr('selected', '')
        }
      })
      $('input.billing_address_2').attr('value', address_2)
    }
    if (district = localStorage.getItem('district')) {
      $('select[name="calc_shipping_district"]').html(district)
      $('select[name="calc_shipping_district"]').on('change', function () {
        var target = $(this).children('option:selected')
        target.attr('selected', '')
        $('select[name="calc_shipping_district"] option').not(target).removeAttr('selected')
        address_2 = target.text()
        $('input.billing_address_2').attr('value', address_2)
        district = $('select[name="calc_shipping_district"]').html()
        localStorage.setItem('district', district)
        localStorage.setItem('address_2_saved', address_2)
      })
    }
    $('select[name="calc_shipping_provinces"]').each(function () {
      var $this = $(this),
        stc = ''
      c.forEach(function (i, e) {
        e += +1
        stc += '<option value=' + e + '>' + i + '</option>'
        $this.html('<option value="">Tỉnh / Thành phố</option>' + stc)
        if (address_1 = localStorage.getItem('address_1_saved')) {
          $('select[name="calc_shipping_provinces"] option').each(function () {
            if ($(this).text() == address_1) {
              $(this).attr('selected', '')
            }
          })
          $('input.billing_address_1').attr('value', address_1)
        }
        $this.on('change', function (i) {
          i = $this.children('option:selected').index() - 1
          var str = '',
            r = $this.val()
          if (r != '') {
            arr[i].forEach(function (el) {
              str += '<option value="' + el + '">' + el + '</option>'
              $('select[name="calc_shipping_district"]').html('<option value="">Quận / Huyện</option>' + str)
            })
            var address_1 = $this.children('option:selected').text()
            var district = $('select[name="calc_shipping_district"]').html()
            localStorage.setItem('address_1_saved', address_1)
            localStorage.setItem('district', district)
            $('select[name="calc_shipping_district"]').on('change', function () {
              var target = $(this).children('option:selected')
              target.attr('selected', '')
              $('select[name="calc_shipping_district"] option').not(target).removeAttr('selected')
              var address_2 = target.text()
              $('input.billing_address_2').attr('value', address_2)
              district = $('select[name="calc_shipping_district"]').html()
              localStorage.setItem('district', district)
              localStorage.setItem('address_2_saved', address_2)
            })
          } else {
            $('select[name="calc_shipping_district"]').html('<option value="">Quận / Huyện</option>')
            district = $('select[name="calc_shipping_district"]').html()
            localStorage.setItem('district', district)
            localStorage.removeItem('address_1_saved', address_1)
          }
        })
      })
    })
    $('form').submit(function (e) {
      e.preventDefault();
      // check use
      let regex = /[^a-zA-ZÀ-ỹ\s]/;
      $('#nameErr').html(regex.test($('#inputName').val()) ? 'Không hợp lệ! Tên chỉ bao gồm các chữ cái' : '');

      regex = /\D/
      $('#phoneNumErr').html(regex.test($('#inputPhoneNumber').val()) ? 'Số điện thoại không hợp lệ!' : '');

      if ($('#nameErr').html() == '' && $('#phoneNumErr').html() == '') {
        //console.log('gui submit');
        //$('form').submit();
      }
    });
  });
</script>