<main class="mains d-flex justify-content-center">
  <div class="container">
    <div class="row w-100">
      
      <div id="productImageCarousel" class="carousel slide w-50" data-bs-ride="carousel">
        <!-- Dynamically create carousel indicators based on the number of images -->
        <div class="carousel-indicators">
          {{#each product.image}}
          <button type="button" data-bs-target="#productImageCarousel" data-bs-slide-to="{{@index}}" class="{{#if @first}}active{{/if}}" aria-current="{{#if @first}}true{{/if}}" aria-label="Slide {{@index}}"></button>
          {{/each}}
        </div>
        
        <!-- Carousel items -->
        <div class="carousel-inner">
          {{#each product.image}}
          <div class="carousel-item {{#if @first}}active{{/if}}">
            <img src="{{this}}" class="carousel-img d-block" alt="{{../product.name}}">
          </div>
          {{/each}}
        </div>
        
        <!-- Carousel controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#productImageCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#productImageCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <div class="blk-pview-info col-lg-6 col-md-12 col-sm-12">
        <div class="blk-code">
          <div class="title">{{product.name}}</div>
          <div class="code">Mã sản phẩm: {{product._id}}</div>
        </div>

        <div class="blk-price">
          <div class="product-price">
            <!-- Assuming price is in a number format -->
            <span class="price">{{formatCurrency product.price}}</span>
          </div>
        </div>

        {{!-- old description place --}}

        <div class="blk-att" data-label="Màu sắc, size sản phẩm">
          <div class="r-at-r d-flex align-items-center">
            <label class="pull-left">Số lượng</label>
            <div class="pull-left">
              <div
                class="blk-qty d-flex justify-content-center align-items-center"
              >
                <div
                  class="blk-qty-btn minus d-flex justify-content-center align-items-center"
                >-</div>
                <input
                  class="blk-qty-input d-flex justify-content-center align-items-center product-quantity"
                  type="text"
                  id="quantity"
                  max="50"
                  min="1"
                  value="1"
                />
                <div
                  class="blk-qty-btn plus d-flex justify-content-center align-items-center"
                >+</div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>

          <div
            class="r-at-r d-sm-flex align-items-center clearfix"
            data-label="btn"
          >
            <div
              id="addToCart"
              class="btn-js-add-cart btn btn-pink"
              data-psid="{{product._id}}"
              data-selid="37901385"
              data-ck="1"
            >Thêm vào giỏ hàng</div>
            <div
              id="addPayNow"
              class="btn-js-add-cart btn btn-pink"
              data-psid="{{product._id}}"
              data-selid="37901385"
              data-ck="1"
            >Mua ngay</div>
          </div>
          <div id="mss-alret"></div>
        </div>
      </div>
      <!-- end blk-pview-info -->

      <div class="trend w-100 d-flex flex-column justify-content-center">

        <div class="col-lg-12 col-md-12 col-sm-12 mt-5" data-label="Nội dung sản phẩm">
          <div class="blk-pview-content full clearfix">
            <div class="blk-pview-title">Mô tả sản phẩm</div>
            <div class="content full clearfix">
              <!-- Product description -->
              <p>{{product.description}}</p>
            </div>
          </div>
        </div>

        <div class="row justify-content-center">
          <div class="rectangle col"></div>
          <div class="main-heading col-md-auto">SẢN PHẨM LIÊN QUAN</div>
          <div class="rectangle col"></div>
        </div>

        <div class="row trend-row">
          {{#each related}}
        
              {{> productitem id=this._id image=this.image.[0] title=this.name price=this.price}}

          {{/each}}
        </div>
        
      </div>

    </div>
  </div>
</main>

<script src="/js/handleCartSpecificProduct.js"></script>
<script src="/js/highestImg.js"></script>
